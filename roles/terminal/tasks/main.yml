---

- name: install zplugin
  aur:
    name: zsh-zplugin-git
    use: pikaur

- name: install urxvt truecolor
  aur:
    name: rxvt-unicode-truecolor
    use: pikaur

- name: install zsh dotfiles
  copy:
    src: "{{ item }}"
    dest: "~/.{{ item }}"
  with_items:
    - zshrc
    - zprofile
    - aliases
  become: yes
  become_user: "{{ user.name }}"

- name: install Xresources
  copy:
    src: Xresources
    dest: ~/.Xresources
  become: yes
  become_user: "{{ user.name }}"

- name: install vim
  pacman:
    name: vim

- name: install ctags
  pacman:
    name: ctags

- name: install vimrc
  copy:
    src: vimrc
    dest: ~/.vimrc
  become: yes
  become_user: "{{ user.name }}"
  register: vimrc

- name: install vundle
  git:
    repo: https://github.com/VundleVim/Vundle.vim.git
    dest: ~/.vim/bundle/Vundle.vim
  register: vundle
  become: yes
  become_user: "{{ user.name }}"

- name: install vundle plugins
  shell: vim +PluginInstall +qall
  when: vimrc.changed or vundle.changed

- name: create urxvt directory
  file:
    path: ~/.urxv/ext
    state: directory
    recurse: yes
  become: yes
  become_user: "{{ user.name }}"

- name: download urxvt font-size
  get_url:
    url: "https://raw.githubusercontent.com/majutsushi/urxvt-font-size/master/font-size"
    dest: ~/.urxv/ext/font-size
  become: yes
  become_user: "{{ user.name }}"
